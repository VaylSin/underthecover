// Fix billing field wrapper
.woocommerce-input-wrapper {
	width: 100%;
}

// Woocommerce product gallery slider width fix
figure.woocommerce-product-gallery__wrapper {
	max-width: inherit !important;
}

// Fix coupon code input width for cart, apply only to the cart as it will break the checkout field width
@media (min-width: 768px) {
	.woocommerce-cart #coupon_code.input-text {
		width: 110px !important;
	}
}

// Fix input fields for Stripe Checkout fields
#stripe-payment-data {
	#wc-stripe-cc-form {
		.form-row {
			display: flex;
			flex-direction: column;
			.wc-stripe-elements-field {
				max-height: 2rem;
			}
		}
	}
	.woocommerce-SavedPaymentMethods-saveNew {
		display: inherit;
	}
}

.woocommerce-notices-wrapper .woocommerce-message {
	@extend .alert;
	@extend .alert-success;
	padding: 1em 2em 1em 3.5em;

	a.button {
		@extend .btn;
		@extend .btn-success;
	}

	&.woocommerce-error {
		@extend .alert-danger;
		a.button {
			@extend .btn-danger;
		}
	}
}

.woocommerce-info {
	@extend .alert;
	@extend .alert-info;
	padding: 1em 2em 1em 3.5em;
	a.button {
		@extend .btn;
		@extend .btn-info;
	}
}

// Accessibility - update color for required class
.woocommerce form .form-row .required {
	color: $danger;
}

.woocommerce form .form-row label {
	// Override WooCommerce default styles.
	@if variable-exists("bootstrap4") {
		&.custom-control-label {
			line-height: inherit;
		}
	} @else {
		&.form-check-label {
			line-height: inherit;
		}
	}
}

@if not variable-exists("bootstrap4") {
	// Override WooCommerce default styles.
	.woocommerce form .form-row .checkbox {
		&.form-check {
			display: block;
			line-height: inherit;
		}
	}
	.woocommerce form .form-row .input-checkbox {
		&.form-check-input {
			$top: ($line-height-base - $form-check-input-width) * 0.5;
			$left: $form-check-padding-start * -1;
			margin: $top 0 0 $left;
		}
	}
}

// Accessibility requirement for color contrast
.woocommerce div.product p.price,
.woocommerce div.product span.price,
.woocommerce div.product .stock,
.woocommerce ul.products li.product .price,
#add_payment_method .cart-collaterals .cart_totals .discount td,
.woocommerce-cart .cart-collaterals .cart_totals .discount td,
.woocommerce-checkout .cart-collaterals .cart_totals .discount td {
	color: $green;
}

.woocommerce-page form .show-password-input {
	top: initial;
}

.btn-increment,
.btn-decrement {
	cursor: pointer;
	font-size: 1.8rem;
	color: $black-main;
	transition: color 0.2s, transform 0.1s;
	&:hover {
		color: $velvet;
		transform: scale(1.2);
	}
}
.woocommerce {
	input[type="number"] {
		margin-left: 0 !important;
		&:focus {
			box-shadow: none;
		}
	}
	.increment_container {
		max-width: 7rem;
		flex-basis: content;
	}
}
.swiper,
.swiper-container {
	overflow: initial !important;
}
/* Contrainte de taille pour la galerie Swiper */
.siklane-swiper-gallery {
	display: flex;
	gap: 0;
	align-items: stretch;
	max-height: 80vh; /* empêche de dépasser la fenêtre */
}

/* Colonne principale : centrer et limiter la hauteur */
.siklane-swiper-main {
	flex: 1 1 auto;
	display: flex;
	align-items: center;
	justify-content: center;
	overflow: hidden;
	max-height: 80vh;
}

/* Chaque slide occupe l'espace du conteneur et centre son image */
.siklane-swiper-main .swiper-slide {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 100%;
}

/* Image principale : respecter la largeur du conteneur et la hauteur max */
.siklane-swiper-main .swiper-slide img {
	width: 100%;
	height: auto;
	max-height: 80vh;
	object-fit: contain; /* change en 'cover' si tu veux recadrer */
	display: block;
}

/* Thumbnails : taille fixe/colonne, garder cover pour miniatures */
.siklane-swiper-thumbs {
	flex: 0 0 5.2rem;
	width: 5.2rem;
	align-self: stretch;
}

.siklane-swiper-thumbs .swiper-slide img {
	width: 100%;
	height: 100%;
	object-fit: cover;
	display: block;
}

/* chaque colonne = 50% (gallery <-> summary) */
// .single-product .siklane-product-inner .siklane-swiper-gallery,
// .single-product .siklane-product-inner .summary.entry-summary {
// 	flex: 0 0 50%;
// 	max-width: 50%;
// 	box-sizing: border-box;
// }
.siklane-product-inner {
	h1 {
		font-size: 1.5625rem;
	}
	.view-all-link {
		font-size: 0.875rem;
	}
	.woocommerce-Price-amount {
		font-size: 1.375rem;
	}
}

/* Colonne miniatures : fixe, centrée verticalement */
.siklane-swiper-thumbs {
	display: flex;
	flex-direction: column;
	justify-content: center; /* centre verticalement les vignettes */
	gap: 0.5rem;
	flex: 0 0 3.6rem; /* colonne plus étroite */
	width: 3.6rem;
	align-self: center; /* s'aligne au centre du conteneur */
	box-sizing: border-box;
	padding: 0.4rem 0;
	overflow: visible;
}

/* chaque mini a taille fixe et n'étire pas la colonne */
.siklane-swiper-thumbs .swiper-slide {
	flex: 0 0 auto; /* ne se dilate pas */
	width: 4.5rem;
	height: 4.5rem;
	min-height: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 0;
	margin: 0;
	box-sizing: border-box;
	overflow: hidden;
	background: transparent;
	cursor: pointer;
	transition: outline 0.1s, background-color 0.1s;
	// &:hover {
	// 	outline: 2px solid $velvet;
	// }
	&.swiper-slide-thumb-active {
		outline: 2px solid $velvet;
	}
}

/* Responsive : sur mobile, miniatures horizontales plus petites */
@media (max-width: 991px) {
	.siklane-swiper-thumbs {
		flex-direction: row;
		width: 100%;
		flex: 0 0 auto;
		padding: 0.3rem 0;
		justify-content: flex-start;
	}
	.siklane-swiper-thumbs .swiper-slide {
		width: 4.5rem;
		height: 4.5rem;
		margin-right: 0.5rem;
	}
}

/* conteneur principal : responsive square, limitation par viewport */
.siklane-swiper-main {
	position: relative;
	width: 100%;
	max-width: 100%;
	max-height: 80vh;
	overflow: hidden;
	display: flex;
	align-items: center;
	justify-content: center;
	/* support moderne */
	aspect-ratio: 1 / 1;
}

/* Fallback pour anciens navigateurs : padding trick */
@supports not (aspect-ratio: 1 / 1) {
	.siklane-swiper-main {
		/* crée un carré via padding */
		height: auto;
	}
	.siklane-swiper-main::before {
		content: "";
		display: block;
		padding-top: 100%; /* 1:1 ratio */
	}
	/* positionne l'intérieur par dessus l'espace créé */
	.siklane-swiper-main .swiper-wrapper,
	.siklane-swiper-main .swiper-slide {
		position: absolute;
		inset: 0;
		display: flex;
		align-items: center;
		justify-content: center;
	}
}

/* Slides : centrer l'image sans étirer le conteneur */
.siklane-swiper-main .swiper-slide {
	box-sizing: border-box;
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Image principale : s'adapte au carré, garde l'aspect ratio */
.siklane-swiper-main .swiper-slide img {
	max-width: 100%;
	max-height: 100%;
	width: auto;
	height: auto;
	object-fit: contain; /* change en cover si tu veux recadrer */
	display: block;
}

/* S'assurer que la colonne de miniatures reste centrée verticalement */
.siklane-swiper-gallery {
	align-items: center;
}
.siklane-swiper-thumbs {
	align-self: center;
	overflow: hidden;
}

/* Conteneur carré et images qui remplissent 100% (crop 1:1 côté client) */
.siklane-swiper-main {
	position: relative;
	width: 100%;
	aspect-ratio: 1 / 1; /* maintien ratio 1:1 */
	max-height: 80vh;
	overflow: hidden;
	display: block;
}

/* wrapper / slides prennent la totalité du conteneur */
.siklane-swiper-main .swiper-wrapper,
.siklane-swiper-main .swiper-slide {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* image remplit exactement le bloc : width/height 100% + cover */
.siklane-swiper-main .swiper-slide img {
	width: 100%;
	height: 100%;
	object-fit: cover; /* recadrage centré */
	object-position: center;
	display: block;
}

/* fallback pour navigateurs sans aspect-ratio */
@supports not (aspect-ratio: 1 / 1) {
	.siklane-swiper-main {
		position: relative;
	}
	.siklane-swiper-main::before {
		content: "";
		display: block;
		padding-top: 100%;
	}
	.siklane-swiper-main .swiper-wrapper,
	.siklane-swiper-main .swiper-slide {
		position: absolute;
		inset: 0;
		display: flex;
		align-items: center;
		justify-content: center;
	}
	.siklane-swiper-main .swiper-slide img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}
}

/* chaque slide occupe tout le conteneur et se superpose */
.siklane-swiper-main .swiper-slide {
	position: absolute !important;
	inset: 0;
	width: 100% !important;
	height: 100% !important;
	display: flex;
	align-items: center;
	justify-content: center;
	opacity: 0;
	visibility: hidden;
	z-index: 0;
	transition: opacity 0.35s ease;
	background-color: #fff; /* évite zone transparente si image tardive */
}

.siklane-swiper-main .swiper-slide.swiper-slide-active,
.siklane-swiper-main .swiper-slide.swiper-slide-thumb-active {
	opacity: 1;
	visibility: visible;
	z-index: 2;
	transition: opacity 0.35s ease;
}

.siklane-swiper-main .swiper-wrapper {
	position: relative !important;
	height: 100% !important;
}

/* Slide empilé : laisser Swiper gérer la transition (pas de transition CSS sur opacity) */
.siklane-swiper-main .swiper-slide {
	position: absolute !important;
	inset: 0;
	width: 100% !important;
	height: 100% !important;
	display: flex;
	align-items: center;
	justify-content: center;
	opacity: 0;
	visibility: hidden;
	z-index: 0;
	transform: none !important;
	will-change: opacity;
	background-color: #fff;
	/* no CSS transition here to avoid double animations */
}

/* Slide actif : visible, au‑dessus */
.siklane-swiper-main .swiper-slide.swiper-slide-active,
.siklane-swiper-main .swiper-slide.swiper-slide-thumb-active {
	opacity: 1 !important;
	visibility: visible !important;
	z-index: 5 !important;
	transform: none !important;
}

/* images plein conteneur */
.siklane-swiper-main .swiper-slide img,
.siklane-swiper-main .swiper-slide .wp-post-image {
	width: 100% !important;
	height: 100% !important;
	object-fit: cover !important;
	object-position: center center !important;
	display: block !important;
}
/* Specs grid 2x2 : icones alignées */
.product-specs-grid .specs-grid {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	grid-auto-rows: auto;
	gap: 0.5rem 1rem; /* espace vertical/horizontal */
	padding: 0;
	margin: 0;
	list-style: none;
}
.product-specs-grid .spec-item {
	display: flex;
	align-items: flex-start; /* permet au label de wrap sans désaligner l'icône */
	min-height: 3.2rem;
}

/* Limiter la largeur du champ qui accueille le libellé pour forcer le wrap */
.product-specs-grid .spec-item {
	box-sizing: border-box;
	min-width: 0 !important;
	gap: 0.75rem;
}

/* largeur max fixe (ajuste 12rem / 14rem selon le rendu souhaité) */
.product-specs-grid .spec-item .spec-label {
	flex: 1 1 auto !important;
	min-width: 0 !important;
	max-width: 12.5rem !important; /* <- règle clé : ajuste cette valeur */
	white-space: normal !important;
	display: -webkit-box !important;
	-webkit-line-clamp: 2 !important;
	-webkit-box-orient: vertical !important;
	overflow: hidden !important;
	text-overflow: ellipsis !important;
	margin: 0 !important; /* utiliser gap du parent, pas de margin-left */
}

.product-specs-grid .spec-icon {
	width: 36px;
	height: 36px;
	flex: 0 0 36px;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	margin-top: 4px; /* ajuste la position verticale par rapport au texte sur 2 lignes */
}

.product-specs-grid .spec-icon img,
.product-specs-grid .spec-icon .spec-icon-img {
	width: 100%;
	height: 100%;
	object-fit: contain;
	display: block;
}

/* clamp sur 2 lignes avec ellipsis */
.product-specs-grid .spec-label {
	display: -webkit-box;
	line-clamp: 2;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
	overflow: hidden;
	text-overflow: ellipsis;
	line-height: 1.15;
	max-height: calc(1.15em * 2);
	font-size: 0.95rem;
	color: $black-main;
	margin-left: 0.75rem;
	word-break: break-word;
}
/* responsive : garde 2x2 sur desktop, passe en 2 colonnes sur mobile si besoin */
@media (max-width: 479px) {
	.product-specs-grid .specs-grid {
		grid-template-columns: repeat(2, 1fr);
		gap: 0.5rem;
	}
}

/* Coloration des étoiles de rating */
.star-rating,
.woocommerce-product-rating .star-rating,
.rating,
.woocommerce .star-rating {
	color: $velvet !important; /* pour les implementations basées sur color */
}

.star-rating::before,
.woocommerce-product-rating .star-rating::before {
	color: $velvet !important; /* pour les pseudo-éléments */
}

/* pour les SVG inline ou icônes utilisant fill */
.star-rating svg,
.woocommerce-product-rating .star-rating svg,
.rating svg {
	fill: $velvet !important;
}

.siklane-swiper-thumbs .swiper-wrapper,
.siklane-swiper-thumbs .swiper-slide {
	box-sizing: border-box;
}

/* chaque slide doit masquer la partie agrandie */
.siklane-swiper-thumbs .swiper-slide {
	overflow: hidden;
	position: relative;
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;
}

/* image : transition et origine de la transformation */
.siklane-swiper-thumbs .swiper-slide img {
	display: block;
	width: 100%;
	height: 100%;
	object-fit: cover;
	object-position: center;
	transition: transform 280ms cubic-bezier(0.22, 0.8, 0.35, 1);
	transform-origin: center center;
	will-change: transform;
}

/* scale au hover ou quand la vignette est active */
.siklane-swiper-thumbs .swiper-slide:hover img,
.siklane-swiper-thumbs .swiper-slide.swiper-slide-thumb-active img {
	transform: scale(1.05);
}

/* s'assurer que la vignette hover soit au-dessus (ne change pas le flux) */
.siklane-swiper-thumbs .swiper-slide:hover {
	z-index: 3;
}

/* Layout produit : utiliser grid pour gérer proprement le gap sans overflow */
.single-product .siklane-product-inner {
	display: grid;
	grid-template-columns: 1fr 1fr; /* deux colonnes égales */
	gap: 3rem; /* ajuste la valeur si nécessaire */
	align-items: start;
	box-sizing: border-box;
}

/* garantir que les enfants ne dépassent pas leur colonne */
.single-product .siklane-product-inner .siklane-swiper-gallery,
.single-product .siklane-product-inner .summary.entry-summary {
	width: 100% !important;
	max-width: 100%;
	flex: none;
	box-sizing: border-box;
}
